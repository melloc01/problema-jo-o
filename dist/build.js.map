{"version":3,"sources":["webpack:///build.js","webpack:///webpack/bootstrap 3ee1ade0584c6ad726f5","webpack:///./src/extractSchema.js","webpack:///./src/facts.js","webpack:///./src/getActualFacts.js","webpack:///./src/schema.js","webpack:///./src/extractFact.js","webpack:///./src/main.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_defineProperty","obj","key","writable","schema","newSchema","map","schemaRow","__WEBPACK_IMPORTED_MODULE_0__extractFact__","facts","actualFacts","fact","_extractFact","entityName","attribute","valid","Error","cardinality","idx","findIndex","actualFact","push","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","length","err","Array","isArray","TypeError","_fact","__WEBPACK_IMPORTED_MODULE_0__schema__","__WEBPACK_IMPORTED_MODULE_1__facts__","__WEBPACK_IMPORTED_MODULE_2__extractSchema__","__WEBPACK_IMPORTED_MODULE_3__getActualFacts__","schemaObject","console","log"],"mappings":"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","file":"build.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function (schema) {\n  var newSchema = {};\n  // extracts the schema to a more readable object, to make it easier to use\n  // from: [\n  //   [ 'attribute_name', 'attribute_property', 'attribute_value' ]\n  // ]\n  // to: {\n  //   'attribute_name' : {'attribute_property': 'attribute_value' }\n  // }\n\n  schema.map(function (schemaRow) {\n    newSchema[schemaRow[0]] = _defineProperty({}, schemaRow[1], schemaRow[2]);\n  });\n\n  return newSchema;\n};\n// It will return\n// {\n//   \"endereço\" : {\n//     \"cardinality\": \"one\"\n//   },\n//   \"telefone\" : {\n//     \"cardinality\": \"many\"\n//   }\n// }\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = [['gabriel', 'endereço', 'av rio branco, 109', true], ['joão', 'endereço', 'rua alice, 10', true], ['joão', 'endereço', 'rua bob, 88', true], ['joão', 'telefone', '234-5678', true], ['joão', 'telefone', '91234-5555', true], ['joão', 'telefone', '234-5678', false], ['gabriel', 'telefone', '98888-1111', true], ['gabriel', 'telefone', '56789-1010', true]];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__extractFact__ = __webpack_require__(4);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function (schema, facts) {\n  var actualFacts = [];\n\n  facts.map(function (fact) {\n    var _extractFact = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__extractFact__[\"a\" /* default */])(fact),\n        entityName = _extractFact.entityName,\n        attribute = _extractFact.attribute,\n        valid = _extractFact.valid;\n\n    // skips tests for not valid rows\n\n\n    if (valid) {\n      if (!schema[attribute]) {\n        throw new Error('Schema not defined for attribute: ' + attribute);\n      }\n      if (!schema[attribute].cardinality) {\n        throw new Error('Schema for \"cardinality\" not defined for attribute: ' + attribute);\n      }\n\n      // insert\n      if (schema[attribute].cardinality === 'one') {\n        // look for actual facts to overwrite the existing one\n        var idx = actualFacts.findIndex(function (actualFact) {\n          return actualFact[0] === entityName && actualFact[1] === attribute;\n        });\n\n        // if not present, push\n        if (idx === -1) {\n          actualFacts.push(fact);\n        } else {\n          // else overwrite\n          // I could update only the attribute row, but for future-proof  I'll update the row\n          actualFacts[idx] = fact;\n        }\n      }\n\n      if (schema[attribute].cardinality === 'many') {\n        // just push\n        actualFacts.push(fact);\n      }\n    }\n  });\n\n  return actualFacts;\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = [['endereço', 'cardinality', 'one'], ['telefone', 'cardinality', 'many']];\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function (fact) {\n  var _fact = _slicedToArray(fact, 4),\n      entityName = _fact[0],\n      attribute = _fact[1],\n      value = _fact[2],\n      valid = _fact[3];\n\n  return {\n    entityName: entityName,\n    attribute: attribute,\n    value: value,\n    valid: valid\n  };\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schema__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__facts__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__extractSchema__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__getActualFacts__ = __webpack_require__(2);\n\n\n\n\n\nvar schemaObject = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__extractSchema__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_0__schema__[\"a\" /* default */]);\nvar actualFacts = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__getActualFacts__[\"a\" /* default */])(schemaObject, __WEBPACK_IMPORTED_MODULE_1__facts__[\"a\" /* default */]);\n\nconsole.log('\\n', actualFacts, '\\n');\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// build.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ee1ade0584c6ad726f5","export default (schema) => {\n  const newSchema = {}\n  // extracts the schema to a more readable object, to make it easier to use\n  // from: [\n  //   [ 'attribute_name', 'attribute_property', 'attribute_value' ]\n  // ]\n  // to: {\n  //   'attribute_name' : {'attribute_property': 'attribute_value' }\n  // }\n\n  schema.map(schemaRow => {\n    newSchema[schemaRow[0]] = {\n      [schemaRow[1]]: schemaRow[2]\n    }\n  })\n\n  return newSchema\n}\n// It will return\n// {\n//   \"endereço\" : {\n//     \"cardinality\": \"one\"\n//   },\n//   \"telefone\" : {\n//     \"cardinality\": \"many\"\n//   }\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/extractSchema.js","export default [\n  ['gabriel', 'endereço', 'av rio branco, 109', true],\n  ['joão', 'endereço', 'rua alice, 10', true],\n  ['joão', 'endereço', 'rua bob, 88', true],\n  ['joão', 'telefone', '234-5678', true],\n  ['joão', 'telefone', '91234-5555', true],\n  ['joão', 'telefone', '234-5678', false],\n  ['gabriel', 'telefone', '98888-1111', true],\n  ['gabriel', 'telefone', '56789-1010', true]\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/facts.js","import extractFact from './extractFact'\n\nexport default (schema, facts) => {\n  const actualFacts = []\n\n  facts.map(fact => {\n    const { entityName, attribute, valid } = extractFact(fact)\n\n    // skips tests for not valid rows\n    if (valid) {\n      if (!schema[attribute]) {\n        throw new Error(`Schema not defined for attribute: ${attribute}`)\n      }\n      if (!schema[attribute].cardinality) {\n        throw new Error(`Schema for \"cardinality\" not defined for attribute: ${attribute}`)\n      }\n\n      // insert\n      if (schema[attribute].cardinality === 'one') {\n        // look for actual facts to overwrite the existing one\n        var idx = actualFacts.findIndex(actualFact => {\n          return actualFact[0] === entityName && actualFact[1] === attribute\n        })\n\n        // if not present, push\n        if (idx === -1) {\n          actualFacts.push(fact)\n        } else {\n          // else overwrite\n          // I could update only the attribute row, but for future-proof  I'll update the row\n          actualFacts[idx] = fact\n        }\n      }\n\n      if (schema[attribute].cardinality === 'many') {\n        // just push\n        actualFacts.push(fact)\n      }\n    }\n  })\n\n  return actualFacts\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/getActualFacts.js","export default [\n  ['endereço', 'cardinality', 'one'],\n  ['telefone', 'cardinality', 'many']\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/schema.js","export default (fact) => {\n  const [entityName, attribute, value, valid] = fact\n\n  return {\n    entityName,\n    attribute,\n    value,\n    valid\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extractFact.js","import schema from './schema'\nimport facts from './facts'\nimport extractSchema from './extractSchema'\nimport getActualFacts from './getActualFacts'\n\nconst schemaObject = extractSchema(schema)\nconst actualFacts = getActualFacts(schemaObject, facts)\n\nconsole.log('\\n', actualFacts, '\\n')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}